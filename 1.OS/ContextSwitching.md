Q. Context Switching이란?

### 정의

: Context Switching이란 CPU가 여러 프로세스를 처리해야 할 때, 현재 실행 중인 프로세스의 상태를 저장하고 다음 프로세스의 상태를 불러와서 실행하는 과정을 의미한다. CPU는 한번에 하나의 프로세스만 처리할 수 있기 때문에, 여러 프로세스를 동시에 시리행하는 것처럼 보이게 하기 위해 이 과정을 반복한다.

### 과정

**1. 현재 Task의 상태 저장**:현재 실행 중인 Task의 상태 정보는 레지스터에 저장되어 있으며, 이 정보를 PCB(Process Control Block)로 관리한다.
**2. PCB에 정보 저장**: 현재 실행 중인 Task의 PCB 정보를 저장한다.
**3. 다음 Task의 상태 읽기**: 다음에 실행할 Task의 PCB 정보를 읽어 레지스터에 적재한다.
**4. CPU할당 및 연속적 작업 수행**: CPU가 이전에 진행하던 과정을 연속적으로 수행할 수 있도록 한다.

### 비용

Context Switching은 많은 비용이 소모된다.

- **Cache 초기화**: 캐시 메모리를 초기화 해야 한다.
- **Memory mapping 초기화**: 메모리 매핑을 다시 설정해야 한다.
- **커널의 지속적인 실행**:커널은 항상 실행되어야 한다.

### 프로세스와 스레드 차이

Context Switching의 비용은 프로세스가 스레드보다 더 많이 든다.

- **프로세스**: 각 프로세스는 독립된 메모리 공간을 갖고 있으므로, Context Switching 시 전체 메모리 상태를 저장하고 복구해야 한다.
- **스레드**: 스레드는 stack 영역을 제외한 모든 메모리를 공유하므로, Context Switching 시 Stack 영역만 변경하면 된다.

이와 같이 Context Switching은 시스템의 성능에 중요한 영향을 미치며, 최적화된 스케줄링과 효율적인 메모리 관리가 필요하다.
