## 프로그램

: 어떤 작업을 위해 실행할 수 있는 파일

## 프로세스

### 1. 프로세스의 정의와 메모리 구조

: 실행 중인 프로그램의 인스턴스이고, 디스크에서 메모리로 적재되어 cpu 할당을 받은 작업 단위다.

- 운영체제한테 시스템 자원을 할당받는다.
  - **할당받는 시스템 자원**:
    - **CPU 시간**: 프로세스가 실행되기 위해 할당받는 CPU 시간
    - **주소공간(Address Space)**: 프로세스가 접근할 수 있는 전체 메모리 범위
    - **독립된 메모리 영역**: 프로세스 내에서 코드, 데이터, 스택, 힙과 같은 섹션들로 구성된다.
      - **Code 섹션**: 실행할 코드가 저장되는 영역
      - **Data 섹션**: 전역 변수와 정적 변수가 저장되는 영역
      - **Stack 섹션**: 함수 호출 시 지역 변수, 매개 변수, 리턴 주소 등이 저장되는 영역.
      - **Heap 섹션**: 동적으로 할당되는 메모리 영역
- 프로세스는 각각 별도의 주소공간 가진다. 주소 공간 내에서 독립된 메모리 영역(code, data, stack, heap)이 구성된다.

### 2. 프로세스와 스레드

- 프로세스마다 최소 1개의 스레드를 가지며, 이를 메인 스레드라고 한다.
- 하나의 프로세스는 여러 개의 스레드를 가질 수 있으며, 이들 스레드는 프로세스의 자원을 공유한다.

### 3. 프로세스 간 메모리 접근

- 프로세스는 각각 독립된 메모리 공간을 가지므로, 한 프로세스는 다른 프로세스의 메모리 영역에 직접 접근할 수 없다. (변수나 자료구조에 접근 X)
- 프로세스 간 데이터를 주고 받기 위해서는 IPC(Inter-Process Communication) 통신을 사용해야 한다.
  IPC EX)
- **파이프(Pipes)**:한 프로세스의 출력이 다른 프로세스의 입력으로 연결되는 통신 방식.
- **파일(Files)**: 프로세스 간 데이터를 주고받기 위한 파일 시스템을 통한 통신.
- **소켓(Sockets)**: 네트워크를 통한 프로세스 간 통신 방식.
- **메시지 큐 (Message Queues)**: 메시지를 큐에 저장하고, 다른 프로세스가 이를 읽어가는 방식.
- **공유 메모리(Shared Memory)**: 두 프로세스가 동일한 메모리 영역을 공유하여 데이터를 주고 받는 방식.

## 프로세스 제어 블록 (Process Control Block, PCB)

: 특정 프로세스에 대한 중요한 정보를 저장하고 있는 커널 내의 자료구조다.

- OS는 프로세스를 관리하기 위해 프로세스의 생성과 동시에 고유한 `PCB`를 생성한다.
- 프로세스는 **CPU**를 할당받아 작업을 처리하다가 => 프로세스 전환이 발생하면 => 진행하던 작업을 저장하고 **CPU를 반환**한다. => 이때의 작업 진행 상황을 모두 `PCB`에 저장한다. => 다시 **CPU를 할당받게** 되면 `PCB에 저장되었던 내용을 불러와 저장시점부터 다시 작업을 수행한다.`
- PCB에 저장되는 정보:

  - **프로세스 식별자(Process ID, PID)**: 프로세스 식별 번호
  - **프로세스 상태**:프로세스의 현재 상태(new, ready, running, waiting, terminated)
  - **프로그램 카운터(Program Counter, PC)**: 프로세스가 다음에 실행할 명령어의 주소.
  - **CPU 레지스터**:프로세스 실행 중의 레지스터 값들이 저장된다. 프로세스 전환 시 이 값들을 PCB에 저장하고, 재실행 시 복원한다.
  - **CPU 스케줄링 정보**: 프로세스의 우선순위, 스케줄 큐에 대한 포인터 등의 스케줄링 정보를 포함한다. 이 정보는 CPU 스케줄러가 프로세스를 선택할 때 사용된다.
  - **메모리 관리 정보**: 프로세스의 주소 공간을 관리하기 위한 정보로, 페이지 테이블 또는 세그먼트 테이블 등과 같은 메모리 관리 정보.
  - **입출력 상태 정보**: 프로세스에 할당된 입출력 장치들, 열린 파일 목록 등의 정보가 포함된다. 프로세스가 어떤 자원을 사용하고 있는지 관리한다.
  - **어카운팅 정보**: 사용된 CPU 시간, 시간 제한, 계정 번호가 포함된다. 이 정보는 시스템 자원 사용량을 추적하는데 사용된다.

  결론) PCB는 운영체제가 **프로세스를 효율적으로 관리**하고 **문맥 전환을 수행**하는데 중요한 역할을 한다. `PCB에 저장된 정보들은 프로세스가 중단된 시점에서 다시 실행할 수 있도록 필요한 모든 데이터를 포함`하고 있다.

## 스레드 (Thread)

### 개요

- 프로세스의 실행 단위
- 한 프로세스 내에서 여러 실행 흐름을 동시에 수행할 수 있다.
- 스레드를 사용하면 프로세스 내에서 여러 작업을 병렬로 실행 => 자원을 효율적으로 사용한다.

### 주요 특징

- **실행 단위** : 프로세스 내에서 실행되는 개별적인 실행 흐름. 한 프로세스는 여러 스레드를 가질 수 있으며, 각 스레드는 독립적으로 실행된다.
- **자원 공유** : 동일한 프로세스 내의 **주소 공간**과 **자원을 공유**한다. 이는 스레드 간의 "통신"과 "데이터 공유"를 용이하게 한다.

### 공유되는 영역

- **Code 영역**: 프로그램의 코드가 저장된 영역.
- **Data 영역**: 전역 변수와 정적 변수가 저장된 영역.
- **Heap 영역**: 동적으로 할당된 메모리가 저장된 영역.

### 개별 영역

- **레지스터**: 독립적인 레지스터 집합을 가진다. (CPU의 임시 저장소로 사용됨)
- **Stack 영역**: 독립적인 스택을 가진다. (함수 호출과 지역 변수를 저장하는 데 사용됨)

### 장점

**병렬 처리**: 여러 스레드를 사용 => 병렬 처리를 구현 => 성능을 향상
**응답성 향상**: 예를 들어, 긴 작업을 별도의 스레드에서 실행하여 사용자 인터페이스가 계속 반응하도록 할 수 있음.
**자원 효율성**: 스레드는 프로세스 간 통신보다 가벼우며, 같은 프로세스 내에서 자원을 공유하므로 자원을 효율적으로 사용할 수 있음.

### 단점

**복잡성 증가**: 여러 스레드를 **관리**하고 **동기화**하는 것은 프로그래밍을 복잡하게 만든다. 잘못된 동기화는 **교착 상태(데드락)나 경쟁 조건(race condition)** 등의 문제를 일으킬 수 있습니다.
**디버깅 어려움**: 멀티스레드 프로그램은 디버깅이 어렵다. **스레드 간의 상호작용과 타이밍 문제**로 인해 버그를 재현하고 수정하는 것이 까다로울 수 있습니다.

### 요약

스레드는 프로세스 내에서 실행되는 독립적인 실행 단위로, 여러 스레드를 사용하면 병렬 처리와 자원 공유를 통해 성능과 응답성을 향상시킬 수 있습니다. 그러나 스레드 관리와 동기화의 복잡성으로 인해 프로그래밍의 어려움이 증가할 수 있습니다. 스레드는 프로세스의 Code, Data, Heap 영역을 공유하며, 각 스레드는 독립적인 레지스터와 Stack을 가집니다.
